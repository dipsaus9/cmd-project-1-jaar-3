(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{166:function(t,e,a){var n=a(176);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);(0,a(48).default)("798c3abc",n,!0,{})},175:function(t,e,a){"use strict";var n=a(166);a.n(n).a},176:function(t,e,a){(t.exports=a(47)(!1)).push([t.i,"body,html{background:#22313f;scroll-behavior:smooth}.basic__information{height:100vh;width:100%;align-items:center;justify-content:center}.basic__form-field,.basic__information{display:flex;flex-direction:column}.basic__form-field .fieldset{display:flex;width:100%;justify-content:center}.basic__form-field h1{color:#fff;font-family:FFTisaOT,serif;font-weight:400;line-height:1}.basic__form-field p{font-family:FFTisaOT,serif;color:hsla(0,0%,100%,.5);text-align:center}.basic__form-field input{width:31.25rem;height:2.5rem;border:none;box-shadow:none;padding:0 1.25rem;font-family:Favorit,serif;font-size:1rem}.basic__form-field button{width:2.5rem;background:transparent;box-shadow:none;height:2.5rem;margin:0 1.25rem;border-radius:50%;border:4px solid #4f7192;color:#fff;font-size:1.25rem;cursor:pointer;outline:none;position:relative;transition:.2s ease-in-out}.basic__form-field button:hover{padding-left:9px}.start{display:flex;opacity:0;transition:.9s ease-in-out .4s;-webkit-clip-path:inset(0 100% 0 0);clip-path:inset(0 100% 0 0)}.start.active{-webkit-clip-path:inset(0 0 0 0);clip-path:inset(0 0 0 0);opacity:1}.start.active .artists__list{height:auto}svg{display:block}svg text{font-family:Favorit,serif;font-size:1rem;z-index:4;position:relative;fill:#fff}svg path{cursor:pointer}.compare{position:fixed;top:0;right:0;-webkit-clip-path:inset(0 0 0 100%);clip-path:inset(0 0 0 100%);transition:.2s ease-in-out;z-index:2}.compare--button{background:#fff;font-size:1rem;font-family:Favorit,serif;border:none;box-shadow:none;padding:1.25rem .9375rem;cursor:pointer;width:12.5rem}.compare.active{-webkit-clip-path:inset(0 0 0 0);clip-path:inset(0 0 0 0)}.svg_container,.svg_container--compare{position:-webkit-sticky;position:sticky;align-self:flex-start;top:0;width:75vw}.artists__list,.svg_container,.svg_container--compare{-webkit-clip-path:inset(0 0 0 0);clip-path:inset(0 0 0 0)}.artists__list{width:25vw;height:0;overflow:hidden}.artists__list ul{width:100%;border-right:1px solid rgba(142,152,159,.5)}.artists__list ul li{height:6.25rem;color:#fff;padding:0}.artists__list ul li:before{content:none}.artists__count-naming{font-size:.75rem;color:hsla(0,0%,100%,.5)}.artists__link{width:100%;padding:0 2.5rem;font-size:1.25rem;cursor:pointer;border-bottom:1px solid rgba(142,152,159,.5);line-height:1;text-decoration:none;height:100%;display:flex;align-items:center;justify-content:space-between;transition:.1s linear}.artists__link:first-of-type{border-top:1px solid rgba(142,152,159,.5)}.artists__link.hover,.artists__link:hover{background:#1b2732;transition:.2s linear}.artists__link.compared{background:#10171e;transition:.2s linear}.second{-webkit-clip-path:inset(0 100% 0 0);clip-path:inset(0 100% 0 0);transition:-webkit-clip-path .5s ease-in-out .5s;transition:clip-path .5s ease-in-out .5s;transition:clip-path .5s ease-in-out .5s,-webkit-clip-path .5s ease-in-out .5s}.second.active{-webkit-clip-path:inset(0 0 0 0);clip-path:inset(0 0 0 0)}.second.active li{color:#fff}.fade-enter-active,.fade-leave-active{transition:-webkit-clip-path .5s ease-in-out;transition:clip-path .5s ease-in-out;transition:clip-path .5s ease-in-out,-webkit-clip-path .5s ease-in-out}.fade-enter,.fade-leave-to{-webkit-clip-path:inset(0 0 0 100%)!important;clip-path:inset(0 0 0 100%)!important}line{stroke:#8e989f}",""])},178:function(t,e,a){"use strict";a.r(e);a(16),a(25),a(33),a(66);var n=a(167),r=a.n(n),i=(a(171),a(96),a(172),a(31),a(94),a(32),a(4)),s=a.n(i),o=a(177),c={data:function(){return{pageNr:1,secondInit:!1,userName:"dipsaus9",maxArtistsPerPage:50,totalTimesPlayed:0,hoverElement:-1,topTracks:{},topArtists:{},artistData:[],state:"home",artists:[],compareArtists:[]}},watch:{compareArtists:{handler:"compareArtistsInit"}},methods:{getData:function(){var t=s()(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return"9295242e7b99eba039f7147793f3bc23",t.next=3,this.$axios({method:"get",url:"https://ws.audioscrobbler.com/2.0/",responseType:"json",params:{api_key:"9295242e7b99eba039f7147793f3bc23",method:"user.getTopTracks",format:"json",period:"7day",user:this.userName}});case 3:(e=t.sent)&&e.data&&e.data.toptracks&&e.data.toptracks.track&&e.data.toptracks.track.length&&(this.topTracks=e.data.toptracks,this.createChart());case 5:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),fancyTimeFormat:function(t){var e=~~(t/3600),a=~~(t%3600/60),n=~~t%60,r="";return e>0&&(r+=e+":"+(a<10?"0":"")),r+=a+":"+(n<10?"0":""),r+=""+n},getLastWeek:function(t){var e=new Date;return new Date(e.getFullYear(),e.getMonth(),e.getDate()-t)},collectAllArtists:function(){var t=this,e=this.getArtistList(this.topTracks);this.topArtists=e.reduce(function(t,e){var a=t.find(function(t){return t.name===e.artist.name});return a?a.children.push(e):t.push({name:e.artist.name,children:[e]}),t},[]),this.topArtists.sort(function(e,a){return t.getTimesPlayed(a.children)-t.getTimesPlayed(e.children)})},createChart:function(){var t=this;this.collectAllArtists();var e=!1;this.totalTimesPlayed=this.topTracks.track.reduce(function(t,e){return t+Number(e.playcount)},0);var a=window.innerHeight,n=window.innerWidth/4*3,r=Math.min(n,a/10*9)/2,i={name:"Artist",children:this.topArtists},s=o.scaleOrdinal(o.quantize(o.interpolateRainbow,i.children.length+1)),c=o.partition().size([2*Math.PI,r])(o.hierarchy(i).sum(function(t){return t.playcount}).sort(function(t,e){return e.playcount-t.playcount}));document.querySelector(".svg_container").innerHTML="";var l=o.select(".svg_container"),u=o.arc().startAngle(function(t){return t.x0}).endAngle(function(t){return t.x1}).padAngle(function(t){return Math.min((t.x1-t.x0)/2,.005)}).padRadius(r/2).innerRadius(function(t){return t.y0}).outerRadius(function(t){return t.y1-1});function p(t){var e=o.interpolate({x0:t.x0s?t.x0s:0,x1:t.x1s?t.x1s:0,y0:t.y0s?t.y0s:0,y1:t.y1s?t.y1s:0},t);return function(a){var n=e(a);return t.x0s=n.x0,t.x1s=n.x1,t.y0s=n.y0,t.y1s=n.y1,u(n)}}var d=l.append("svg").attr("class","svg__element").attr("width",n).attr("height",a).attr("viewBox","0 0 ".concat(n," ").concat(a)).attr("perserveAspectRatio","xMinYMid").append("g").attr("class","svg__element-g").attr("transform","translate(".concat(n/2,", ").concat(a/2,")"));d.append("g").attr("class","middle-text").append("text").attr("transform","translate(0, 0)").style("text-anchor","middle").text("Total songs played: ".concat(this.totalTimesPlayed)),d.append("g").attr("fill-opacity",.6).selectAll("path").data(c.descendants().filter(function(t){return t.depth})).enter().append("path").attr("class","paths").on("mouseover",function(a,n){if(e){if(2===a.depth){var r=a.parent.data.name;n=i.children.findIndex(function(t){return t.name===r})}document.getElementById(n).scrollIntoView(),t.hoverElement=n}}).on("click",function(e,a){if(2===e.depth){var n=e.parent.data.name;a=i.children.findIndex(function(t){return t.name===n})}t.artistToCompare(a)}).on("mouseleave",function(){t.hoverElement=-1}).attr("fill",function(t){for(;t.depth>1;)t=t.parent;return s(t.data.name)}).transition().ease(o.easeCubic).delay(function(t,e){return 15*e}).duration(15).attrTween("d",function(t,e){return p(t)}),o.selectAll("path").append("title").text(function(e){return function(e){if(e.playcount)return"".concat(e.name," - Played ").concat(e.playcount," times");var a=t.getTimesPlayed(e.children);return"".concat(e.name," - Played ").concat(a," times")}(e.data)}),d.append("g").attr("pointer-events","none").attr("text-anchor","middle").selectAll("text").data(c.descendants().filter(function(t){return t.depth&&(t.y0+t.y1)/2*(t.x1-t.x0)>10})).enter().append("text").attr("transform",function(t){var e=(t.x0+t.x1)/2*180/Math.PI,a=(t.y0+t.y1)/2;return"rotate(".concat(e-90,") translate(").concat(a,",0) rotate(").concat(e<180?0:180,")")}).attr("dy","0.35em").style("opacity",0).transition().delay(function(t,e){return 15*e}).duration(15).style("opacity",1).text(function(t){return(e=t.data).playcount?a=e.name.split(" ").splice(0,2).join(" "):(a=e.name).length>15?a.split(" ").splice(0,3).join(" "):a;var e,a}),window.addEventListener("resize",function(){a=window.innerHeight,n=window.innerWidth/4*3,r=Math.min(n,a/10*9)/2;var t=o.select(".svg__element"),e=o.select(".svg__element-g"),i=o.selectAll(".paths");t.attr("class","svg__element").attr("width",n).attr("height",a).attr("viewBox","0 0 ".concat(n," ").concat(a)).attr("perserveAspectRatio","xMinYMid"),e.attr("class","svg__element-g").attr("transform","translate(".concat(n/2,", ").concat(a/2,")")),u=o.arc().startAngle(function(t){return t.x0}).endAngle(function(t){return t.x1}).padAngle(function(t){return Math.min((t.x1-t.x0)/2,.005)}).padRadius(r/2).innerRadius(function(t){return t.y0}).outerRadius(function(t){return t.y1-1}),i.transition().ease(o.easeCubic).duration(15).attrTween("d",function(t,e){return p(t)})}),window.scrollTo(0,a),setTimeout(function(){e=!0},500)},getArtistList:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.maxArtistsPerPage;if(t&&t.track&&t.track.length){var a=e,n=this.pageNr;return r()(t.track).splice((n-1)*a,a)}return[]},compareArtistsInit:function(){var t=s()(regeneratorRuntime.mark(function t(){var e,a,n=this,r=arguments;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return!0===(e=r.length>0&&void 0!==r[0]&&r[0])&&(this.state="artist"),this.compareArtists.length<2&&"artist"===this.state&&(this.state="home",this.secondInit=!1,setTimeout(function(){n.createChart()})),t.next=5,Promise.all(this.compareArtists.map(function(){var t=s()(regeneratorRuntime.mark(function t(e){var a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=n.topArtists[e].name.split(" ").join("+"),t.next=3,n.getArtistInfo(a);case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()));case 5:(a=t.sent).length>1&&(this.artists=a,this.createSecondChart(e));case 7:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),createSecondChart:function(){var t=this;document.querySelector(".svg_container--compare")&&function(){document.querySelector(".svg_container--compare").innerHTML="";for(var e=t.artists,a=t.compareArtists.map(function(e){return t.topArtists[e].name}),n=[],r=!1,i=e.map(function(t){for(var e=[],a=function(a){var i;r||n.push(a),i=t.filter(function(t){if(new Date(1e3*t.date.uts).getHours()===a)return!0}).length,e.push(i)},i=0;i<24;i++)a(i);return r=!0,e}),s=i[0].length,c=[],l=function(t){var e=0;i.forEach(function(n,r){var i=n[t];n[t]=[e,e+n[t],a[r]],e+=i}),c.push(e)},u=0;u<s;u++)l(u);i.keys=a,i.names=n,i.totals=c;var p=window.innerHeight,d=window.innerWidth/4*3,f=i,m=50,h=40,v=150,g=40,_=o.scaleBand().rangeRound([0,d-g-h]).padding(.3).align(.3),x=o.scaleLinear().rangeRound([p-m-v,0]),y=o.scaleOrdinal().range(["#98abc5","#8a89a6","#7b6888","#6b486b","#a05d56","#d0743c","#ff8c00"]);_.domain(f.names),x.domain([0,o.max(f.totals)]).nice(),t.secondInit=!0;var b=o.select(".svg_container--compare").append("svg").attr("class","svg__element--compare").attr("width",d).attr("height",p).attr("viewBox","0 0 ".concat(d," ").concat(p)).attr("perserveAspectRatio","xMinYMid").append("g").attr("class","svg__element-g").attr("transform","translate(".concat(g,", ").concat(m,")"));b.append("g").attr("class","axis axis--y").call(o.axisLeft(x).ticks(10,"s").tickSize(-d).tickFormat(o.format("d"))).append("text").attr("x",2).attr("y",x(x.ticks(10).pop())).attr("dy","0.35em").attr("text-anchor","start").attr("fill","#000").text("Total numbers"),b.append("g").attr("class","axis axis--x").attr("transform","translate(0, ".concat(p-m-v,")")).call(o.axisBottom(_)).append("text").attr("x",2).attr("y",x(x.ticks(10).pop())).attr("dy","0.35em").attr("text-anchor","start").attr("fill","#000").text("Hours"),b.selectAll(".bars").data(f).enter().append("g").attr("class","bars").attr("fill",function(t,e){return y(t[e][2])}).selectAll("rect").data(function(t){return t}).enter().append("rect").attr("x",function(t,e){return _(f.names[e])}).attr("y",function(t){return x(t[1])}).attr("height",function(t){return x(t[0])-x(t[1])}).attr("width",_.bandwidth()).append("title").text(function(t){return t[2]})}()},getArtistInfo:function(){var t=s()(regeneratorRuntime.mark(function t(e){var a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return"9295242e7b99eba039f7147793f3bc23",t.next=3,this.$axios({method:"get",url:"https://ws.audioscrobbler.com/2.0/",responseType:"json",params:{api_key:"9295242e7b99eba039f7147793f3bc23",artist:e,method:"user.getArtistTracks",format:"json",user:this.userName}});case 3:if(!((a=t.sent)&&a.data&&a.data.artisttracks&&a.data.artisttracks.track)){t.next=6;break}return t.abrupt("return",a.data.artisttracks.track);case 6:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),getTimesPlayed:function(t){return t.reduce(function(t,e){return t+Number(e.playcount)},0)},artistToCompare:function(t){var e=this.compareArtists.indexOf(t);-1===e?this.compareArtists.push(t):this.compareArtists.splice(e,1)}}},l=(a(175),a(22)),u=Object(l.a)(c,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("main",{staticClass:"page page--home"},["artist"!==t.state?a("section",{staticClass:"basic__information"},[a("div",{staticClass:"basic__form-field"},[a("h1",[t._v("What music do I like?")]),t._v(" "),a("p",[t._v("Enter your Last.fm username to find out more about your top 50 tracks of last month!")]),t._v(" "),a("form",{on:{submit:function(e){return e.preventDefault(),t.getData(e)}}},[a("div",{staticClass:"fieldset"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.userName,expression:"userName"}],attrs:{autofocus:"",type:"text",required:""},domProps:{value:t.userName},on:{input:function(e){e.target.composing||(t.userName=e.target.value)}}}),t._v(" "),t.userName?a("button",{attrs:{type:"submit"}},[t._v("â†’")]):t._e()])])])]):t._e(),t._v(" "),a("transition",{attrs:{name:"fade"}},[a("section",{staticClass:"start active",attrs:{id:"data"}},[a("div",{staticClass:"artists__list"},[a("ul",t._l(t.topArtists,function(e,n){return a("li",{key:n,on:{click:function(e){t.artistToCompare(n)}}},[a("span",{staticClass:"artists__link",class:{hover:n===t.hoverElement,compared:t.compareArtists.includes(n)},attrs:{id:n}},[a("span",{staticClass:"artists__name"},[t._v(t._s(e.name))]),t._v(" "),a("span",{staticClass:"artists__count"},[a("span",{staticClass:"artists__count-naming"},[t._v("Times played: "+t._s(t.getTimesPlayed(e.children)))])])])])}),0)]),t._v(" "),a("transition",{attrs:{name:"fade"}},["artist"!==t.state?a("div",{staticClass:"svg_container"}):t._e()]),t._v(" "),a("transition",{attrs:{name:"fade"}},["artist"===t.state?a("div",{staticClass:"svg_container--compare"}):t._e()]),t._v(" "),a("div",{staticClass:"compare",class:{active:t.compareArtists.length>1&&"home"===t.state}},[a("button",{staticClass:"compare--button",on:{click:function(e){t.compareArtistsInit(!0)}}},[t._v("Compare selected artists")])])],1)]),t._v(" "),a("section",{staticClass:"second",class:{active:"artist"===t.state}},t._l(t.artistData,function(e,n){return a("li",{key:n},[t._v("\n\t\t\t"+t._s(e.name)+"\n\t\t")])}),0)],1)},[],!1,null,null,null);u.options.__file="index.vue";e.default=u.exports}}]);